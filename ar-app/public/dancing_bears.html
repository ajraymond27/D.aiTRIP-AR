<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Aframe Sound Component Example</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>
      <a-assets>
        <audio id="music" src="sound.mp3" autoplay></audio>
      </a-assets>
    
      <a-entity position="0 1.6 -4">
        <a-box color="red" onclick="toggleMusic()"></a-box>
        <a-entity position="0 1.5 0">
          <a-entity id="playButton" geometry="primitive: circle; radius: 0.15" material="color: green"></a-entity>
          <a-entity id="pauseButton" geometry="primitive: circle; radius: 0.15" material="color: red" visible="false"></a-entity>
        </a-entity>
        <a-sound id="musicPlayer" src="#music" autoplay="false"></a-sound>
      </a-entity>
    </a-scene>
    
    <script>
      const musicPlayer = document.querySelector('#musicPlayer');
      const playButton = document.querySelector('#playButton');
      const pauseButton = document.querySelector('#pauseButton');
      
      // Listen for the loadedmetadata event on the audio element
      musicPlayer.addEventListener('loadedmetadata', function() {
        const context = musicPlayer.components.sound.pool.children[0].source.context;
        if (context.state === 'suspended') {
          context.resume();
        }
      });
    
      function toggleMusic() {
        if (musicPlayer.paused) {
          musicPlayer.play();
          playButton.setAttribute('material', 'color: grey');
          pauseButton.setAttribute('material', 'color: red');
          pauseButton.setAttribute('visible', 'true');
        } else {
          musicPlayer.pause();
          playButton.setAttribute('material', 'color: green');
          pauseButton.setAttribute('visible', 'false');
        }
      }
    </script>
  </body>
</html>
